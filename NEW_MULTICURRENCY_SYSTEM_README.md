# النظام المحاسبي الجديد متعدد العملات v3.0
# New Multi-Currency Accounting System v3.0

## 🌟 نظرة عامة | Overview

تم تطوير نظام محاسبي جديد كامل من الصفر يدعم العملات المتعددة بشكل متقدم، مع شجرة محاسبية محسّنة تضم **161 حساب** مُصمم خصيصاً لتلبية احتياجات الشركات المتوسطة والكبيرة.

## ✨ المزايا الجديدة | New Features

### 🌍 دعم شامل للعملات المتعددة
- **جميع الحسابات** تدعم العملات المتعددة
- أسعار صرف بدقة **10 خانات عشرية**
- تتبع أرباح/خسائر الصرف تلقائياً
- أرصدة منفصلة لكل عملة

### 🌳 الشجرة المحاسبية المحسّنة
- **161 حساب** مُنظم بذكاء
- نظام ترقيم متقدم (1000-5999)
- **4 مستويات هرمية** مُحسَّنة
- تصنيف دولي متوافق مع IAS/IFRS

### 🔢 نظام الترقيم الذكي
- **1000-1999**: الأصول (Assets)
- **2000-2999**: الخصوم (Liabilities)  
- **3000-3999**: حقوق الملكية (Equity)
- **4000-4999**: الإيرادات (Revenues)
- **5000-5999**: المصروفات (Expenses)

## 📊 إحصائيات النظام الجديد

| الفئة | عدد الحسابات | النطاق |
|-------|-------------|--------|
| الأصول | 45 حساب | 1000-1999 |
| الخصوم | 18 حساب | 2000-2999 |
| رأس المال | 8 حسابات | 3000-3999 |
| الإيرادات | 12 حساب | 4000-4999 |
| المصروفات | 78 حساب | 5000-5999 |
| **المجموع** | **161 حساب** | |

## 🚀 تعليمات التنفيذ | Implementation Guide

### الخطوة 1: تنظيف النظام الحالي

```bash
# تنفيذ أمر تنظيف النظام
php artisan system:clean --force
```

### الخطوة 2: تطبيق التحديثات التقنية

```bash
# تشغيل migrations الجديدة
php artisan migrate

# أو إعادة إنشاء قاعدة البيانات بالكامل (اختياري)
php artisan migrate:fresh
```

### الخطوة 3: إنشاء النظام الجديد

```bash
# تشغيل seeder النظام الجديد
php artisan db:seed --class=NewSystemSeeder
```

### الخطوة 4: اختبار النظام

```bash
# تشغيل اختبارات النظام
php test_new_system.php
```

## 🛠️ الملفات الجديدة المُنشأة

### Commands
- `app/Console/Commands/CleanSystemCommand.php` - أمر تنظيف النظام

### Migrations  
- `database/migrations/2025_01_20_000001_enhance_multicurrency_support.php` - تحسينات العملات المتعددة

### Seeders
- `database/seeders/CurrenciesSeeder.php` - العملات الأساسية
- `database/seeders/OptimalMultiCurrencyChartSeeder.php` - الشجرة المحاسبية الجديدة
- `database/seeders/NewSystemSeeder.php` - Seeder رئيسي

### Testing
- `test_new_system.php` - اختبارات شاملة للنظام

## 💱 العملات المدعومة

### العملات النشطة افتراضياً:
- **IQD** (دينار عراقي) - العملة الأساسية
- **USD** (دولار أمريكي) 
- **EUR** (يورو)

### عملات إضافية (غير نشطة):
- **GBP** (جنيه إسترليني)
- **SAR** (ريال سعودي)
- **AED** (درهم إماراتي)
- **TRY** (ليرة تركية)

## 📋 نماذج من الحسابات الجديدة

### 💰 الصناديق والبنوك
- `1011` - الصندوق الرئيسي
- `1012` - صندوق المبيعات  
- `1013` - صندوق المشتريات
- `1021` - بنك الرافدين - الحساب الجاري
- `1022` - مصرف الرشيد - الحساب الجاري

### 👥 العملاء والموردين
- `1101` - عملاء الجملة
- `1102` - عملاء التجزئة
- `2101` - موردو المواد الخام
- `2102` - موردو البضائع

### 📈 الإيرادات والمصروفات
- `4001` - مبيعات بضائع
- `4002` - مبيعات خدمات
- `5201` - رواتب الموظفين
- `5301` - إيجار المكاتب

## 🔐 بيانات الدخول الافتراضية

- **البريد الإلكتروني**: `admin@company.com`
- **كلمة المرور**: `password123`

## ⚙️ الإعدادات الأساسية

- العملة الأساسية: **IQD**
- دقة العرض: **3 خانات عشرية** للدينار العراقي
- دقة العرض: **2 خانتان عشريتان** للدولار واليورو
- دعم العملات المتعددة: **مُفعَّل**

## 🧪 اختبار النظام

### اختبارات تلقائية:
```bash
php test_new_system.php
```

### اختبارات يدوية:
1. تسجيل الدخول للنظام
2. مراجعة شجرة الحسابات
3. فحص العملات وأسعار الصرف
4. إنشاء سند تجريبي بعملات مختلفة

## 📊 التقارير المتاحة

- **ميزان المراجعة** متعدد العملات
- **قائمة المركز المالي** 
- **قائمة الدخل**
- **تقرير أرباح/خسائر الصرف**
- **تقرير حركة العملات**

## 🔧 صيانة النظام

### تحديث أسعار الصرف:
```sql
UPDATE currency_rates 
SET rate = 1320.0000000000 
WHERE from_currency = 'USD' AND to_currency = 'IQD' 
AND effective_date = CURDATE();
```

### إضافة عملة جديدة:
```bash
php artisan currencies:add JPY "Japanese Yen" "¥" 2 128.50
```

## 🚨 نصائح مهمة

### ⚠️ قبل التنفيذ:
- ✅ عمل نسخة احتياطية كاملة من النظام الحالي
- ✅ التأكد من إيقاف جميع العمليات المحاسبية
- ✅ إخطار جميع المستخدمين بالتوقف المؤقت

### 🔄 بعد التنفيذ:
- ✅ مراجعة وتحديث أسعار الصرف اليومية
- ✅ إدخال الأرصدة الافتتاحية لجميع العملات
- ✅ تدريب المستخدمين على النظام الجديد
- ✅ اختبار جميع العمليات المحاسبية

## 📞 الدعم التقني

### في حالة وجود مشاكل:
1. **مراجعة ملفات السجلات**: `storage/logs/laravel.log`
2. **تشغيل اختبارات النظام**: `php test_new_system.php`
3. **التحقق من قاعدة البيانات**: فحص الجداول والفهارس

### أوامر استكشاف الأخطاء:
```bash
# فحص حالة النظام
php artisan system:status

# إعادة تحميل أسعار الصرف
php artisan currencies:refresh-rates

# إعادة حساب الأرصدة
php artisan accounts:recalculate-balances
```

## 🎯 خارطة الطريق

### المرحلة القادمة (v3.1):
- [ ] تقارير تحليلية متقدمة
- [ ] ذكاء اصطناعي لتحليل المعاملات
- [ ] API للتكامل مع الأنظمة الخارجية
- [ ] تطبيق جوال للمتابعة

### تحسينات مقترحة:
- [ ] تحديث أسعار الصرف التلقائي من البنك المركزي
- [ ] إشعارات تقلبات أسعار الصرف
- [ ] تقارير ضريبية آلية
- [ ] نظام موافقات إلكتروني

---

## 📝 ملاحظات التطوير

تم تطوير هذا النظام باستخدام:
- **Laravel 10+** 
- **MySQL 8.0+**
- **PHP 8.1+**
- **Bootstrap 5**
- **Chart.js** للرسوم البيانية

**تاريخ الإصدار**: يناير 2025  
**الإصدار**: v3.0.0  
**الحالة**: جاهز للإنتاج

---

🎉 **مبروك! النظام المحاسبي الجديد جاهز للاستخدام** 